---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

commonLabels:
  # topology.kubernetes.io/region: demo
  # Each SITE_ID is a different zone
  #topology.kubernetes.io/zone: sample-zone
  telco-gitops/cluster-name: compact-hubcluster
  telco-gitops/cluster-type: hubcluster

generatorOptions:
  # Annotations to work around automatically generated resoruces
  # to avoid ArgoCD reporing out-of-sync
  annotations:
    argcd.argoproj.io/compare-options: IgnoreExtraneous
    argocd.argoproj.io/sync-options: Prune=false


bases:
# - ../../base/configs/all-common
- ../../../blueprints/hubcluster-simple

#  # OpenShift Logging
#  # - ../../base/operators/openshift-logging
#  - github.com/openshift-telco/telco-gitops/base/operators/openshift-logging?ref=main

#resources:
#- node-role.yaml

images:
- name: registry.redhat.io/openshift4/ose-cli
  newName: hubcluster-registry.apps.mgmt.espoo.nsn-rdnet.net/openshift/ose-cli

patchesStrategicMerge:
- |-
  apiVersion: operators.coreos.com/v1alpha1
  kind: Subscription
  metadata:
    name: advanced-cluster-management
    namespace: open-cluster-management
  spec:
    source: mirrored-rh-operator-catalog
- |-
  apiVersion: operators.coreos.com/v1alpha1
  kind: Subscription
  metadata:
    name: openshift-local-storage-operator
    namespace: openshift-local-storage
  spec:
    source: mirrored-rh-operator-catalog
- |-
  apiVersion: operators.coreos.com/v1alpha1
  kind: Subscription
  metadata:
    name: odf-operator
    namespace: openshift-storage
  spec:
    source: mirrored-rh-operator-catalog
- |-
  apiVersion: operators.coreos.com/v1alpha1
  kind: Subscription
  metadata:
    name: ocs-operator
    namespace: openshift-storage
  spec:
    source: mirrored-rh-operator-catalog

# patchesStrategicMerge:
# - |-

